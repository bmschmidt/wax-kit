import{_ as e}from"../../../chunks/preload-helper-08cc8e69.js";import{S as s,i as t,s as r,l as a,f as n,d as o,e as l,t as i,k as c,c as h,a as f,g as d,n as m,b as u,F as p,G as v,Q as g,H as _,z as j}from"../../../chunks/vendor-33472b1e.js";import{p as E}from"../../../chunks/stores-1cac51d3.js";import{d as I}from"../../../chunks/OMG_THIS_IS_HACKY_BUT_ITD_BE_A_DATABASE-bda68cd3.js";import{b as y,a as b}from"../../../chunks/paths-2c73d5fe.js";function A(e,s,t){const r=e.slice();return r[7]=s[t][0],r[8]=s[t][1],r}function D(e){let s,t,r,a,v,g,_=e[7]+"",j=e[8]+"",E=I.filter((function(...s){return e[2](e[7],e[8],...s)})).length>1;let y=E&&function(e){let s,t,r,a,c=I.filter(m).length-1+"";function m(...s){return e[3](e[7],e[8],...s)}return{c(){s=l("a"),t=i("("),r=i(c),a=i(" other items.)"),this.h()},l(e){s=h(e,"A",{href:!0});var n=f(s);t=d(n,"("),r=d(n,c),a=d(n," other items.)"),n.forEach(o),this.h()},h(){u(s,"href","../items/"+e[7]+"/"+e[8]+"/")},m(e,o){n(e,s,o),p(s,t),p(s,r),p(s,a)},p(s,t){e=s},d(e){e&&o(s)}}}(e);return{c(){s=l("dt"),t=i(_),r=l("dd"),a=i(j),v=c(),y&&y.c(),g=c(),this.h()},l(e){s=h(e,"DT",{class:!0});var n=f(s);t=d(n,_),n.forEach(o),r=h(e,"DD",{class:!0});var l=f(r);a=d(l,j),v=m(l),y&&y.l(l),g=m(l),l.forEach(o),this.h()},h(){u(s,"class","svelte-11yzdpy"),u(r,"class","svelte-11yzdpy")},m(e,o){n(e,s,o),p(s,t),n(e,r,o),p(r,a),p(r,v),y&&y.m(r,null),p(r,g)},p(s,t){e=s,E&&y.p(e,t)},d(e){e&&o(s),e&&o(r),y&&y.d()}}}function k(e){let s,t=e[8]&&D(e);return{c(){t&&t.c(),s=a()},l(e){t&&t.l(e),s=a()},m(e,r){t&&t.m(e,r),n(e,s,r)},p(e,s){e[8]&&t.p(e,s)},d(e){t&&t.d(e),e&&o(s)}}}function T(e){let s,t,r,a,_,j,E,I,y,b=e[1].label+"",D=Object.entries(e[1]),T=[];for(let n=0;n<D.length;n+=1)T[n]=k(A(e,D,n));return{c(){s=l("h1"),t=i(b),r=c(),a=l("div"),_=c(),j=l("a"),E=i("IIIF manifest for this item."),I=c(),y=l("dl");for(let e=0;e<T.length;e+=1)T[e].c();this.h()},l(e){s=h(e,"H1",{});var n=f(s);t=d(n,b),n.forEach(o),r=m(e),a=h(e,"DIV",{id:!0,class:!0}),f(a).forEach(o),_=m(e),j=h(e,"A",{href:!0});var l=f(j);E=d(l,"IIIF manifest for this item."),l.forEach(o),I=m(e),y=h(e,"DL",{class:!0});var i=f(y);for(let s=0;s<T.length;s+=1)T[s].l(i);i.forEach(o),this.h()},h(){u(a,"id","osd"),u(a,"class","image-viewer svelte-11yzdpy"),u(j,"href",e[0]),u(y,"class","svelte-11yzdpy")},m(e,o){n(e,s,o),p(s,t),n(e,r,o),n(e,a,o),n(e,_,o),n(e,j,o),p(j,E),n(e,I,o),n(e,y,o);for(let s=0;s<T.length;s+=1)T[s].m(y,null)},p(e,[s]){if(2&s){let t;for(D=Object.entries(e[1]),t=0;t<D.length;t+=1){const r=A(e,D,t);T[t]?T[t].p(r,s):(T[t]=k(r),T[t].c(),T[t].m(y,null))}for(;t<T.length;t+=1)T[t].d(1);T.length=D.length}},i:v,o:v,d(e){e&&o(s),e&&o(r),e&&o(a),e&&o(_),e&&o(j),e&&o(I),e&&o(y),g(T,e)}}}function z(s,t,r){let a;_(s,E,(e=>r(4,a=e)));const{collection:n,pid:o}=a.params,l=`${y}/iiif/${o}/manifest.json`,i=I.filter((e=>e.pid==a.params.pid))[0]||{label:"Not found"};j((async()=>{const s=e((()=>import("../../../chunks/openseadragon-c1836331.js").then((function(e){return e.o}))),[]),t=fetch(l).then((e=>e.json())).then((e=>(console.log(e),e.sequences[0].canvases.map((e=>(console.log(e.images[0].resource.service["@id"]),e.images[0].resource.service["@id"]+"/info.json"))))));Promise.all([s,t]).then((([e,s])=>{e.default({id:"osd",prefixUrl:`${b}/assets/openseadragon/images/`,preserveViewport:!0,visibilityRatio:1,minZoomLevel:1,defaultZoomLevel:1,sequenceMode:!0,tileSources:s})}))}));return[l,i,(e,s,t)=>t[e]==s,(e,s,t)=>t[e]==s]}export default class extends s{constructor(e){super(),t(this,e,z,T,r,{})}}
