import{S as t,i as n,s as a,l,f as e,G as r,d as i,t as c,g as o,h as s,M as u,e as d,c as f,a as h,b as m,F as p,N as b,k as g,n as k,Q as v}from"../../chunks/vendor-974ea28c.js";import{d as I}from"../../chunks/OMG_THIS_IS_HACKY_BUT_ITD_BE_A_DATABASE-85255ead.js";let x="http://iiif.benschmidt.org/iiif/2/";const _=I,A={};async function E(t){const n=await async function(t){if(A[t])return A[t];let n;n=_.filter((n=>n.pid==t))[0]["wax:images"];const a=n.map((t=>`${x}/${t}/info.json`)).map((t=>fetch(t).then((t=>t.json())))),l=await Promise.all(a);return A[t]=l,l}(t);if(0===n.length)return"http://made-up.com/default.png";return`${n[0]["@id"]}/full/250,/0/default.jpg`}function j(t){let n,a,l;return{c(){n=c("Could not find an id for "),a=c(t[0]),l=c(";")},l(e){n=o(e,"Could not find an id for "),a=o(e,t[0]),l=o(e,";")},m(t,r){e(t,n,r),e(t,a,r),e(t,l,r)},p(t,n){1&n&&s(a,t[0])},d(t){t&&i(n),t&&i(a),t&&i(l)}}}function C(t){let n,a,l,r,c,o={ctx:t,current:null,token:null,hasCatch:!1,pending:$,then:T,catch:G,value:3};return u(r=t[2],o),{c(){n=d("div"),a=d("a"),l=d("figure"),o.block.c(),this.h()},l(t){n=f(t,"DIV",{class:!0,id:!0});var e=h(n);a=f(e,"A",{href:!0});var r=h(a);l=f(r,"FIGURE",{});var c=h(l);o.block.l(c),c.forEach(i),r.forEach(i),e.forEach(i),this.h()},h(){m(a,"href",c="/"+t[1].collection+"/"+t[0]+"/"),m(n,"class","thumb svelte-4dxg8"),m(n,"id",t[0])},m(t,r){e(t,n,r),p(n,a),p(a,l),o.block.m(l,o.anchor=null),o.mount=()=>l,o.anchor=null},p(l,e){t=l,o.ctx=t,4&e&&r!==(r=t[2])&&u(r,o)||b(o,t,e),3&e&&c!==(c="/"+t[1].collection+"/"+t[0]+"/")&&m(a,"href",c),1&e&&m(n,"id",t[0])},d(t){t&&i(n),o.block.d(),o.token=null,o=null}}}function G(t){return{c:r,l:r,m:r,p:r,d:r}}function T(t){let n,a,l,r,u,b,I=t[1].label+"";return{c(){n=d("img"),r=g(),u=d("figcaption"),b=c(I),this.h()},l(t){n=f(t,"IMG",{src:!0,alt:!0,style:!0}),r=k(t),u=f(t,"FIGCAPTION",{});var a=h(u);b=o(a,I),a.forEach(i),this.h()},h(){n.src!==(a=t[3])&&m(n,"src",a),m(n,"alt",l="Improve alt-text: "+t[1].label),v(n,"width","100%")},m(t,a){e(t,n,a),e(t,r,a),e(t,u,a),p(u,b)},p(t,e){4&e&&n.src!==(a=t[3])&&m(n,"src",a),2&e&&l!==(l="Improve alt-text: "+t[1].label)&&m(n,"alt",l),2&e&&I!==(I=t[1].label+"")&&s(b,I)},d(t){t&&i(n),t&&i(r),t&&i(u)}}}function $(t){let n;return{c(){n=c("[Looking for thumbnail]")},l(t){n=o(t,"[Looking for thumbnail]")},m(t,a){e(t,n,a)},p:r,d(t){t&&i(n)}}}function w(t){let n;function a(t,n){return t[1]&&t[0]?C:j}let c=a(t),o=c(t);return{c(){o.c(),n=l()},l(t){o.l(t),n=l()},m(t,a){o.m(t,a),e(t,n,a)},p(t,[l]){c===(c=a(t))&&o?o.p(t,l):(o.d(1),o=c(t),o&&(o.c(),o.m(n.parentNode,n)))},i:r,o:r,d(t){o.d(t),t&&i(n)}}}function S(t,n,a){let l,{datum:e}=n,{pid:r}=n;return r?l=E(r):null==e||(r=e.pid),t.$$set=t=>{"datum"in t&&a(1,e=t.datum),"pid"in t&&a(0,r=t.pid)},[r,e,l]}export default class extends t{constructor(t){super(),n(this,t,S,w,a,{datum:1,pid:0})}}
