import{_ as e,a as s}from"../../../chunks/paths-952bacad.js";import{S as t,i as r,s as n,l as a,f as o,d as l,e as c,t as i,k as h,c as f,a as d,g as u,n as m,b as p,F as g,G as v,O as _,H as j,z as y}from"../../../chunks/vendor-974ea28c.js";import{p as E}from"../../../chunks/stores-c284218b.js";import{d as D}from"../../../chunks/OMG_THIS_IS_HACKY_BUT_ITD_BE_A_DATABASE-85255ead.js";function b(e,s,t){const r=e.slice();return r[6]=s[t][0],r[7]=s[t][1],r}function A(e){let s,t,r,n,a,v,_=e[6]+"",j=e[7]+"",y=D.filter((function(...s){return e[1](e[6],e[7],...s)})).length>1;let E=y&&function(e){let s,t,r,n,a=D.filter(h).length-1+"";function h(...s){return e[2](e[6],e[7],...s)}return{c(){s=c("a"),t=i("("),r=i(a),n=i(" other items.)"),this.h()},l(e){s=f(e,"A",{href:!0});var o=d(s);t=u(o,"("),r=u(o,a),n=u(o," other items.)"),o.forEach(l),this.h()},h(){p(s,"href","../items/"+e[6]+"/"+e[7]+"/")},m(e,a){o(e,s,a),g(s,t),g(s,r),g(s,n)},p(s,t){e=s},d(e){e&&l(s)}}}(e);return{c(){s=c("dt"),t=i(_),r=c("dd"),n=i(j),a=h(),E&&E.c(),v=h(),this.h()},l(e){s=f(e,"DT",{class:!0});var o=d(s);t=u(o,_),o.forEach(l),r=f(e,"DD",{class:!0});var c=d(r);n=u(c,j),a=m(c),E&&E.l(c),v=m(c),c.forEach(l),this.h()},h(){p(s,"class","svelte-11yzdpy"),p(r,"class","svelte-11yzdpy")},m(e,l){o(e,s,l),g(s,t),o(e,r,l),g(r,n),g(r,a),E&&E.m(r,null),g(r,v)},p(s,t){e=s,y&&E.p(e,t)},d(e){e&&l(s),e&&l(r),E&&E.d()}}}function k(e){let s,t=e[7]&&A(e);return{c(){t&&t.c(),s=a()},l(e){t&&t.l(e),s=a()},m(e,r){t&&t.m(e,r),o(e,s,r)},p(e,s){e[7]&&t.p(e,s)},d(e){t&&t.d(e),e&&l(s)}}}function T(e){let s,t,r,n,a,j,y=e[0].label+"",E=Object.entries(e[0]),D=[];for(let o=0;o<E.length;o+=1)D[o]=k(b(e,E,o));return{c(){s=c("h1"),t=i(y),r=h(),n=c("div"),a=h(),j=c("dl");for(let e=0;e<D.length;e+=1)D[e].c();this.h()},l(e){s=f(e,"H1",{});var o=d(s);t=u(o,y),o.forEach(l),r=m(e),n=f(e,"DIV",{id:!0,class:!0}),d(n).forEach(l),a=m(e),j=f(e,"DL",{class:!0});var c=d(j);for(let s=0;s<D.length;s+=1)D[s].l(c);c.forEach(l),this.h()},h(){p(n,"id","osd"),p(n,"class","image-viewer svelte-11yzdpy"),p(j,"class","svelte-11yzdpy")},m(e,l){o(e,s,l),g(s,t),o(e,r,l),o(e,n,l),o(e,a,l),o(e,j,l);for(let s=0;s<D.length;s+=1)D[s].m(j,null)},p(e,[s]){if(1&s){let t;for(E=Object.entries(e[0]),t=0;t<E.length;t+=1){const r=b(e,E,t);D[t]?D[t].p(r,s):(D[t]=k(r),D[t].c(),D[t].m(j,null))}for(;t<D.length;t+=1)D[t].d(1);D.length=E.length}},i:v,o:v,d(e){e&&l(s),e&&l(r),e&&l(n),e&&l(a),e&&l(j),_(D,e)}}}function z(t,r,n){let a;j(t,E,(e=>n(3,a=e)));const{collection:o,pid:l}=a.params,c=D.filter((e=>e.pid==a.params.pid))[0];y((async()=>{const t=e((()=>import("../../../chunks/openseadragon-c1836331.js").then((function(e){return e.o}))),void 0),r=fetch(`/iiif/${l}/manifest.json`).then((e=>e.json())).then((e=>(console.log(e),e.sequences[0].canvases.map((e=>(console.log(e.images[0].resource.service["@id"]),e.images[0].resource.service["@id"]+"/info.json"))))));Promise.all([t,r]).then((([e,t])=>{e.default({id:"osd",prefixUrl:`${s}/assets/openseadragon/images/`,preserveViewport:!0,visibilityRatio:1,minZoomLevel:1,defaultZoomLevel:1,sequenceMode:!0,tileSources:t})}))}));return[c,(e,s,t)=>t[e]==s,(e,s,t)=>t[e]==s]}export default class extends t{constructor(e){super(),r(this,e,z,T,n,{})}}
